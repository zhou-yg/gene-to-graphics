{"dependencies":[{"name":"/Users/zyg/Documents/gene-to-graphics/package.json","includedInParent":true,"mtime":1529810311000},{"name":"/Users/zyg/Documents/gene-to-graphics/.babelrc.js","includedInParent":true,"mtime":1529758976000}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t};exports.normalizeGraphics=n;class e{constructor(t){this.type=t.type||\"\",this.attrs=t.attrs||{},this.genes=t.genes||{}}getAttrs(){return Object.keys(this.attrs).map(t=>{const e=this.genes[t];if(Array.isArray(this.attrs[t])){let s=e||[];return{[t]:this.attrs[t].map((t,e)=>s[e]?s[e].express||0:t)}}return{[t]:e?e.express?e.express:0:this.attrs[t]}}).reduce((t,e)=>Object.assign(t,e),{})}output(){return t({type:this.type},this.getAttrs())}}exports.G=e;class s extends e{constructor(t={}){super(t),this.type=s.name,t.attrs||(this.attrs={pointers:[20,20,100,20,100,100,20,20],fill:\"#000000\"})}}exports.Polygon=s;class r extends e{constructor(t={}){super(t),this.type=r.name,t.attrs||(this.attrs={x:20,y:20,w:80,h:50,fill:\"#000000\"})}}exports.Rect=r;class a extends e{constructor(t={}){super(t),this.type=a.name,t.attrs||(this.attrs={x:100,y:100,r:30,fill:\"#000000\"})}}function n(e,n){const c=[].concat(e).map(e=>t({},e,{id:e._id,nameText:decodeURIComponent(e.name),showData:function(e){return e.map(e=>{switch((e=t({},e,{genes:Object.keys(e.genes).map(t=>e.genes[t]?{[t]:n.filter(e=>e.name===t)[0]}:{}).reduce((t,e)=>Object.assign(t,e),{})})).type){case r.name:return new r(e);case a.name:return new a(e);case s.name:return new s(e)}}).filter(t=>t)}(e.showData||[])}));var o={};const i={other:\"其它\",eye:\"眼\",head:\"头\",horn:\"角\"};return c.map(t=>{var e=t.category;e||(e=\"other\"),o[e]||(o[e]={category:e,name:i[e]||\"other\",graphicsList:[]}),o[e].graphicsList.push(t)}),o=Object.values(o)}exports.Circle=a;","map":{"mappings":[{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":0}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":13}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":20}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":35}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":43}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":57}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":64}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":68}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":72}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":74}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":81}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":89}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":98}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":101}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":105}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":109}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":111}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":113}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":115}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":125}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":132}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":136}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":137}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":141}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":143}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":153}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":156}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":160}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":164}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":169}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":171}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":178}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":188}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":203}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":208}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":210}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":215}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":217}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":220}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":222}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":226}},{"source":"G.js","original":{"line":150,"column":0},"generated":{"line":1,"column":233}},{"source":"G.js","name":"normalizeGraphics","original":{"line":77,"column":16},"generated":{"line":1,"column":236}},{"source":"G.js","name":"normalizeGraphics","original":{"line":77,"column":16},"generated":{"line":1,"column":244}},{"source":"G.js","name":"normalizeGraphics","original":{"line":77,"column":16},"generated":{"line":1,"column":262}},{"source":"G.js","name":"G","original":{"line":1,"column":13},"generated":{"line":1,"column":270}},{"source":"G.js","name":"initial","original":{"line":2,"column":15},"generated":{"line":1,"column":272}},{"source":"G.js","name":"initial","original":{"line":2,"column":15},"generated":{"line":1,"column":284}},{"source":"G.js","name":"type","original":{"line":3,"column":9},"generated":{"line":1,"column":287}},{"source":"G.js","name":"type","original":{"line":3,"column":9},"generated":{"line":1,"column":292}},{"source":"G.js","name":"initial","original":{"line":3,"column":16},"generated":{"line":1,"column":297}},{"source":"G.js","name":"type","original":{"line":3,"column":24},"generated":{"line":1,"column":299}},{"source":"G.js","original":{"line":3,"column":32},"generated":{"line":1,"column":305}},{"source":"G.js","name":"attrs","original":{"line":4,"column":9},"generated":{"line":1,"column":308}},{"source":"G.js","name":"attrs","original":{"line":4,"column":9},"generated":{"line":1,"column":313}},{"source":"G.js","name":"initial","original":{"line":4,"column":17},"generated":{"line":1,"column":319}},{"source":"G.js","name":"attrs","original":{"line":4,"column":25},"generated":{"line":1,"column":321}},{"source":"G.js","name":"genes","original":{"line":5,"column":9},"generated":{"line":1,"column":331}},{"source":"G.js","name":"genes","original":{"line":5,"column":9},"generated":{"line":1,"column":336}},{"source":"G.js","name":"initial","original":{"line":5,"column":17},"generated":{"line":1,"column":342}},{"source":"G.js","name":"genes","original":{"line":5,"column":25},"generated":{"line":1,"column":344}},{"source":"G.js","original":{"line":7,"column":14},"generated":{"line":1,"column":354}},{"source":"G.js","name":"attrKeys","original":{"line":9,"column":11},"generated":{"line":1,"column":365}},{"source":"G.js","name":"Object","original":{"line":8,"column":21},"generated":{"line":1,"column":372}},{"source":"G.js","name":"keys","original":{"line":8,"column":28},"generated":{"line":1,"column":379}},{"source":"G.js","original":{"line":8,"column":33},"generated":{"line":1,"column":384}},{"source":"G.js","name":"attrs","original":{"line":8,"column":38},"generated":{"line":1,"column":389}},{"source":"G.js","name":"map","original":{"line":9,"column":20},"generated":{"line":1,"column":396}},{"source":"G.js","name":"k","original":{"line":9,"column":24},"generated":{"line":1,"column":400}},{"source":"G.js","name":"gene","original":{"line":10,"column":12},"generated":{"line":1,"column":404}},{"source":"G.js","name":"gene","original":{"line":10,"column":12},"generated":{"line":1,"column":410}},{"source":"G.js","original":{"line":10,"column":19},"generated":{"line":1,"column":412}},{"source":"G.js","name":"genes","original":{"line":10,"column":24},"generated":{"line":1,"column":417}},{"source":"G.js","name":"k","original":{"line":10,"column":30},"generated":{"line":1,"column":423}},{"source":"G.js","name":"Array","original":{"line":12,"column":10},"generated":{"line":1,"column":426}},{"source":"G.js","name":"Array","original":{"line":12,"column":10},"generated":{"line":1,"column":429}},{"source":"G.js","name":"isArray","original":{"line":12,"column":16},"generated":{"line":1,"column":435}},{"source":"G.js","original":{"line":12,"column":24},"generated":{"line":1,"column":443}},{"source":"G.js","name":"attrs","original":{"line":12,"column":29},"generated":{"line":1,"column":448}},{"source":"G.js","name":"k","original":{"line":12,"column":35},"generated":{"line":1,"column":454}},{"source":"G.js","original":{"line":12,"column":40},"generated":{"line":1,"column":458}},{"source":"G.js","name":"geneArr","original":{"line":13,"column":12},"generated":{"line":1,"column":459}},{"source":"G.js","name":"geneArr","original":{"line":13,"column":12},"generated":{"line":1,"column":463}},{"source":"G.js","name":"gene","original":{"line":13,"column":22},"generated":{"line":1,"column":465}},{"source":"G.js","original":{"line":14,"column":15},"generated":{"line":1,"column":471}},{"source":"G.js","name":"k","original":{"line":15,"column":11},"generated":{"line":1,"column":478}},{"source":"G.js","name":"k","original":{"line":15,"column":11},"generated":{"line":1,"column":479}},{"source":"G.js","original":{"line":15,"column":15},"generated":{"line":1,"column":482}},{"source":"G.js","name":"attrs","original":{"line":15,"column":20},"generated":{"line":1,"column":487}},{"source":"G.js","name":"k","original":{"line":15,"column":26},"generated":{"line":1,"column":493}},{"source":"G.js","name":"map","original":{"line":15,"column":29},"generated":{"line":1,"column":496}},{"source":"G.js","original":{"line":15,"column":33},"generated":{"line":1,"column":500}},{"source":"G.js","name":"v","original":{"line":15,"column":34},"generated":{"line":1,"column":501}},{"source":"G.js","name":"i","original":{"line":15,"column":37},"generated":{"line":1,"column":503}},{"source":"G.js","name":"geneArr","original":{"line":16,"column":19},"generated":{"line":1,"column":507}},{"source":"G.js","name":"i","original":{"line":16,"column":27},"generated":{"line":1,"column":509}},{"source":"G.js","name":"geneArr","original":{"line":16,"column":33},"generated":{"line":1,"column":512}},{"source":"G.js","name":"i","original":{"line":16,"column":41},"generated":{"line":1,"column":514}},{"source":"G.js","name":"express","original":{"line":16,"column":44},"generated":{"line":1,"column":517}},{"source":"G.js","original":{"line":16,"column":55},"generated":{"line":1,"column":526}},{"source":"G.js","name":"v","original":{"line":16,"column":60},"generated":{"line":1,"column":528}},{"source":"G.js","original":{"line":20,"column":13},"generated":{"line":1,"column":532}},{"source":"G.js","name":"k","original":{"line":21,"column":9},"generated":{"line":1,"column":539}},{"source":"G.js","name":"k","original":{"line":21,"column":9},"generated":{"line":1,"column":540}},{"source":"G.js","name":"gene","original":{"line":21,"column":13},"generated":{"line":1,"column":543}},{"source":"G.js","name":"gene","original":{"line":21,"column":20},"generated":{"line":1,"column":545}},{"source":"G.js","name":"express","original":{"line":21,"column":25},"generated":{"line":1,"column":547}},{"source":"G.js","name":"gene","original":{"line":21,"column":35},"generated":{"line":1,"column":555}},{"source":"G.js","name":"express","original":{"line":21,"column":40},"generated":{"line":1,"column":557}},{"source":"G.js","original":{"line":21,"column":50},"generated":{"line":1,"column":565}},{"source":"G.js","original":{"line":21,"column":54},"generated":{"line":1,"column":567}},{"source":"G.js","name":"attrs","original":{"line":21,"column":59},"generated":{"line":1,"column":572}},{"source":"G.js","name":"k","original":{"line":21,"column":65},"generated":{"line":1,"column":578}},{"source":"G.js","name":"reduce","original":{"line":23,"column":7},"generated":{"line":1,"column":584}},{"source":"G.js","original":{"line":23,"column":14},"generated":{"line":1,"column":591}},{"source":"G.js","name":"p","original":{"line":23,"column":15},"generated":{"line":1,"column":592}},{"source":"G.js","name":"c","original":{"line":23,"column":18},"generated":{"line":1,"column":594}},{"source":"G.js","name":"Object","original":{"line":23,"column":24},"generated":{"line":1,"column":598}},{"source":"G.js","name":"assign","original":{"line":23,"column":31},"generated":{"line":1,"column":605}},{"source":"G.js","name":"p","original":{"line":23,"column":38},"generated":{"line":1,"column":612}},{"source":"G.js","name":"c","original":{"line":23,"column":41},"generated":{"line":1,"column":614}},{"source":"G.js","original":{"line":25,"column":12},"generated":{"line":1,"column":621}},{"source":"G.js","original":{"line":26,"column":4},"generated":{"line":1,"column":630}},{"source":"G.js","original":{"line":26,"column":4},"generated":{"line":1,"column":637}},{"source":"G.js","original":{"line":27,"column":12},"generated":{"line":1,"column":640}},{"source":"G.js","original":{"line":27,"column":12},"generated":{"line":1,"column":645}},{"source":"G.js","name":"type","original":{"line":27,"column":17},"generated":{"line":1,"column":650}},{"source":"G.js","original":{"line":28,"column":9},"generated":{"line":1,"column":656}},{"source":"G.js","name":"getAttrs","original":{"line":28,"column":14},"generated":{"line":1,"column":661}},{"source":"G.js","name":"G","original":{"line":1,"column":13},"generated":{"line":1,"column":674}},{"source":"G.js","name":"G","original":{"line":1,"column":13},"generated":{"line":1,"column":682}},{"source":"G.js","name":"G","original":{"line":1,"column":13},"generated":{"line":1,"column":684}},{"source":"G.js","name":"Polygon","original":{"line":33,"column":13},"generated":{"line":1,"column":692}},{"source":"G.js","name":"G","original":{"line":33,"column":29},"generated":{"line":1,"column":702}},{"source":"G.js","name":"initial","original":{"line":34,"column":15},"generated":{"line":1,"column":704}},{"source":"G.js","name":"initial","original":{"line":34,"column":15},"generated":{"line":1,"column":716}},{"source":"G.js","name":"initial","original":{"line":35,"column":10},"generated":{"line":1,"column":722}},{"source":"G.js","name":"initial","original":{"line":35,"column":10},"generated":{"line":1,"column":728}},{"source":"G.js","name":"type","original":{"line":36,"column":9},"generated":{"line":1,"column":731}},{"source":"G.js","name":"type","original":{"line":36,"column":9},"generated":{"line":1,"column":736}},{"source":"G.js","name":"Polygon","original":{"line":36,"column":16},"generated":{"line":1,"column":741}},{"source":"G.js","name":"name","original":{"line":36,"column":24},"generated":{"line":1,"column":743}},{"source":"G.js","name":"initial","original":{"line":37,"column":9},"generated":{"line":1,"column":748}},{"source":"G.js","name":"attrs","original":{"line":37,"column":17},"generated":{"line":1,"column":750}},{"source":"G.js","name":"attrs","original":{"line":38,"column":11},"generated":{"line":1,"column":758}},{"source":"G.js","name":"attrs","original":{"line":38,"column":11},"generated":{"line":1,"column":763}},{"source":"G.js","original":{"line":39,"column":18},"generated":{"line":1,"column":770}},{"source":"G.js","original":{"line":39,"column":19},"generated":{"line":1,"column":780}},{"source":"G.js","original":{"line":39,"column":23},"generated":{"line":1,"column":783}},{"source":"G.js","original":{"line":39,"column":27},"generated":{"line":1,"column":786}},{"source":"G.js","original":{"line":39,"column":32},"generated":{"line":1,"column":790}},{"source":"G.js","original":{"line":39,"column":36},"generated":{"line":1,"column":793}},{"source":"G.js","original":{"line":39,"column":41},"generated":{"line":1,"column":797}},{"source":"G.js","original":{"line":39,"column":46},"generated":{"line":1,"column":801}},{"source":"G.js","original":{"line":39,"column":50},"generated":{"line":1,"column":804}},{"source":"G.js","original":{"line":40,"column":14},"generated":{"line":1,"column":808}},{"source":"G.js","original":{"line":40,"column":14},"generated":{"line":1,"column":813}},{"source":"G.js","name":"Polygon","original":{"line":33,"column":13},"generated":{"line":1,"column":826}},{"source":"G.js","name":"Polygon","original":{"line":33,"column":13},"generated":{"line":1,"column":834}},{"source":"G.js","name":"Polygon","original":{"line":33,"column":13},"generated":{"line":1,"column":842}},{"source":"G.js","name":"Rect","original":{"line":46,"column":13},"generated":{"line":1,"column":850}},{"source":"G.js","name":"G","original":{"line":46,"column":26},"generated":{"line":1,"column":860}},{"source":"G.js","name":"initial","original":{"line":47,"column":15},"generated":{"line":1,"column":862}},{"source":"G.js","name":"initial","original":{"line":47,"column":15},"generated":{"line":1,"column":874}},{"source":"G.js","name":"initial","original":{"line":48,"column":10},"generated":{"line":1,"column":880}},{"source":"G.js","name":"initial","original":{"line":48,"column":10},"generated":{"line":1,"column":886}},{"source":"G.js","name":"type","original":{"line":49,"column":9},"generated":{"line":1,"column":889}},{"source":"G.js","name":"type","original":{"line":49,"column":9},"generated":{"line":1,"column":894}},{"source":"G.js","name":"Rect","original":{"line":49,"column":16},"generated":{"line":1,"column":899}},{"source":"G.js","name":"name","original":{"line":49,"column":21},"generated":{"line":1,"column":901}},{"source":"G.js","name":"initial","original":{"line":50,"column":9},"generated":{"line":1,"column":906}},{"source":"G.js","name":"attrs","original":{"line":50,"column":17},"generated":{"line":1,"column":908}},{"source":"G.js","name":"attrs","original":{"line":51,"column":11},"generated":{"line":1,"column":916}},{"source":"G.js","name":"attrs","original":{"line":51,"column":11},"generated":{"line":1,"column":921}},{"source":"G.js","original":{"line":52,"column":11},"generated":{"line":1,"column":928}},{"source":"G.js","original":{"line":52,"column":11},"generated":{"line":1,"column":930}},{"source":"G.js","original":{"line":53,"column":11},"generated":{"line":1,"column":933}},{"source":"G.js","original":{"line":53,"column":11},"generated":{"line":1,"column":935}},{"source":"G.js","original":{"line":54,"column":11},"generated":{"line":1,"column":938}},{"source":"G.js","original":{"line":54,"column":11},"generated":{"line":1,"column":940}},{"source":"G.js","original":{"line":55,"column":11},"generated":{"line":1,"column":943}},{"source":"G.js","original":{"line":55,"column":11},"generated":{"line":1,"column":945}},{"source":"G.js","original":{"line":56,"column":14},"generated":{"line":1,"column":948}},{"source":"G.js","original":{"line":56,"column":14},"generated":{"line":1,"column":953}},{"source":"G.js","name":"Rect","original":{"line":46,"column":13},"generated":{"line":1,"column":966}},{"source":"G.js","name":"Rect","original":{"line":46,"column":13},"generated":{"line":1,"column":974}},{"source":"G.js","name":"Rect","original":{"line":46,"column":13},"generated":{"line":1,"column":979}},{"source":"G.js","name":"Circle","original":{"line":62,"column":13},"generated":{"line":1,"column":987}},{"source":"G.js","name":"G","original":{"line":62,"column":28},"generated":{"line":1,"column":997}},{"source":"G.js","name":"initial","original":{"line":63,"column":15},"generated":{"line":1,"column":999}},{"source":"G.js","name":"initial","original":{"line":63,"column":15},"generated":{"line":1,"column":1011}},{"source":"G.js","name":"initial","original":{"line":64,"column":10},"generated":{"line":1,"column":1017}},{"source":"G.js","name":"initial","original":{"line":64,"column":10},"generated":{"line":1,"column":1023}},{"source":"G.js","name":"type","original":{"line":65,"column":9},"generated":{"line":1,"column":1026}},{"source":"G.js","name":"type","original":{"line":65,"column":9},"generated":{"line":1,"column":1031}},{"source":"G.js","name":"Circle","original":{"line":65,"column":16},"generated":{"line":1,"column":1036}},{"source":"G.js","name":"name","original":{"line":65,"column":23},"generated":{"line":1,"column":1038}},{"source":"G.js","name":"initial","original":{"line":66,"column":9},"generated":{"line":1,"column":1043}},{"source":"G.js","name":"attrs","original":{"line":66,"column":17},"generated":{"line":1,"column":1045}},{"source":"G.js","name":"attrs","original":{"line":67,"column":11},"generated":{"line":1,"column":1053}},{"source":"G.js","name":"attrs","original":{"line":67,"column":11},"generated":{"line":1,"column":1058}},{"source":"G.js","original":{"line":68,"column":11},"generated":{"line":1,"column":1065}},{"source":"G.js","original":{"line":68,"column":11},"generated":{"line":1,"column":1067}},{"source":"G.js","original":{"line":69,"column":11},"generated":{"line":1,"column":1071}},{"source":"G.js","original":{"line":69,"column":11},"generated":{"line":1,"column":1073}},{"source":"G.js","original":{"line":70,"column":11},"generated":{"line":1,"column":1077}},{"source":"G.js","original":{"line":70,"column":11},"generated":{"line":1,"column":1079}},{"source":"G.js","original":{"line":71,"column":14},"generated":{"line":1,"column":1082}},{"source":"G.js","original":{"line":71,"column":14},"generated":{"line":1,"column":1087}},{"source":"G.js","original":{"line":77,"column":7},"generated":{"line":1,"column":1100}},{"source":"G.js","name":"normalizeGraphics","original":{"line":77,"column":16},"generated":{"line":1,"column":1109}},{"source":"G.js","name":"graphicsData","original":{"line":77,"column":35},"generated":{"line":1,"column":1111}},{"source":"G.js","name":"genes","original":{"line":77,"column":49},"generated":{"line":1,"column":1113}},{"source":"G.js","name":"graphicsList","original":{"line":106,"column":8},"generated":{"line":1,"column":1116}},{"source":"G.js","name":"graphicsList","original":{"line":106,"column":8},"generated":{"line":1,"column":1122}},{"source":"G.js","name":"concat","original":{"line":106,"column":26},"generated":{"line":1,"column":1127}},{"source":"G.js","name":"graphicsData","original":{"line":106,"column":33},"generated":{"line":1,"column":1134}},{"source":"G.js","name":"map","original":{"line":106,"column":47},"generated":{"line":1,"column":1137}},{"source":"G.js","name":"obj","original":{"line":106,"column":51},"generated":{"line":1,"column":1141}},{"source":"G.js","name":"obj","original":{"line":107,"column":7},"generated":{"line":1,"column":1144}},{"source":"G.js","name":"obj","original":{"line":107,"column":7},"generated":{"line":1,"column":1149}},{"source":"G.js","name":"obj","original":{"line":108,"column":8},"generated":{"line":1,"column":1152}},{"source":"G.js","name":"obj","original":{"line":108,"column":8},"generated":{"line":1,"column":1155}},{"source":"G.js","name":"_id","original":{"line":108,"column":12},"generated":{"line":1,"column":1157}},{"source":"G.js","name":"decodeURIComponent","original":{"line":109,"column":14},"generated":{"line":1,"column":1161}},{"source":"G.js","name":"decodeURIComponent","original":{"line":109,"column":14},"generated":{"line":1,"column":1170}},{"source":"G.js","name":"obj","original":{"line":109,"column":33},"generated":{"line":1,"column":1189}},{"source":"G.js","name":"name","original":{"line":109,"column":37},"generated":{"line":1,"column":1191}},{"source":"G.js","name":"initShowData","original":{"line":110,"column":14},"generated":{"line":1,"column":1197}},{"source":"G.js","name":"initShowData","original":{"line":79,"column":11},"generated":{"line":1,"column":1206}},{"source":"G.js","name":"d","original":{"line":79,"column":25},"generated":{"line":1,"column":1215}},{"source":"G.js","name":"d","original":{"line":80,"column":11},"generated":{"line":1,"column":1218}},{"source":"G.js","name":"d","original":{"line":80,"column":11},"generated":{"line":1,"column":1225}},{"source":"G.js","name":"map","original":{"line":80,"column":13},"generated":{"line":1,"column":1227}},{"source":"G.js","name":"originData","original":{"line":80,"column":17},"generated":{"line":1,"column":1231}},{"source":"G.js","name":"originData","original":{"line":95,"column":14},"generated":{"line":1,"column":1235}},{"source":"G.js","name":"originData","original":{"line":82,"column":11},"generated":{"line":1,"column":1243}},{"source":"G.js","name":"originData","original":{"line":82,"column":11},"generated":{"line":1,"column":1245}},{"source":"G.js","name":"originData","original":{"line":82,"column":11},"generated":{"line":1,"column":1250}},{"source":"G.js","name":"Object","original":{"line":83,"column":15},"generated":{"line":1,"column":1253}},{"source":"G.js","name":"Object","original":{"line":83,"column":15},"generated":{"line":1,"column":1259}},{"source":"G.js","name":"keys","original":{"line":83,"column":22},"generated":{"line":1,"column":1266}},{"source":"G.js","name":"originData","original":{"line":83,"column":27},"generated":{"line":1,"column":1271}},{"source":"G.js","name":"genes","original":{"line":83,"column":38},"generated":{"line":1,"column":1273}},{"source":"G.js","name":"map","original":{"line":83,"column":45},"generated":{"line":1,"column":1280}},{"source":"G.js","name":"prop","original":{"line":83,"column":49},"generated":{"line":1,"column":1284}},{"source":"G.js","name":"originData","original":{"line":84,"column":27},"generated":{"line":1,"column":1287}},{"source":"G.js","name":"genes","original":{"line":84,"column":38},"generated":{"line":1,"column":1289}},{"source":"G.js","name":"prop","original":{"line":84,"column":44},"generated":{"line":1,"column":1295}},{"source":"G.js","name":"prop","original":{"line":90,"column":13},"generated":{"line":1,"column":1299}},{"source":"G.js","name":"prop","original":{"line":90,"column":13},"generated":{"line":1,"column":1300}},{"source":"G.js","name":"genes","original":{"line":90,"column":20},"generated":{"line":1,"column":1303}},{"source":"G.js","name":"filter","original":{"line":90,"column":26},"generated":{"line":1,"column":1305}},{"source":"G.js","name":"gen","original":{"line":90,"column":33},"generated":{"line":1,"column":1312}},{"source":"G.js","name":"gen","original":{"line":90,"column":40},"generated":{"line":1,"column":1315}},{"source":"G.js","name":"name","original":{"line":90,"column":44},"generated":{"line":1,"column":1317}},{"source":"G.js","name":"prop","original":{"line":90,"column":53},"generated":{"line":1,"column":1324}},{"source":"G.js","original":{"line":90,"column":59},"generated":{"line":1,"column":1327}},{"source":"G.js","name":"reduce","original":{"line":92,"column":11},"generated":{"line":1,"column":1335}},{"source":"G.js","original":{"line":92,"column":18},"generated":{"line":1,"column":1342}},{"source":"G.js","name":"p","original":{"line":92,"column":19},"generated":{"line":1,"column":1343}},{"source":"G.js","name":"c","original":{"line":92,"column":22},"generated":{"line":1,"column":1345}},{"source":"G.js","name":"Object","original":{"line":92,"column":28},"generated":{"line":1,"column":1349}},{"source":"G.js","name":"assign","original":{"line":92,"column":35},"generated":{"line":1,"column":1356}},{"source":"G.js","name":"p","original":{"line":92,"column":42},"generated":{"line":1,"column":1363}},{"source":"G.js","name":"c","original":{"line":92,"column":45},"generated":{"line":1,"column":1365}},{"source":"G.js","name":"type","original":{"line":95,"column":25},"generated":{"line":1,"column":1375}},{"source":"G.js","name":"Rect","original":{"line":96,"column":13},"generated":{"line":1,"column":1381}},{"source":"G.js","name":"Rect","original":{"line":96,"column":13},"generated":{"line":1,"column":1386}},{"source":"G.js","name":"name","original":{"line":96,"column":18},"generated":{"line":1,"column":1388}},{"source":"G.js","original":{"line":97,"column":17},"generated":{"line":1,"column":1393}},{"source":"G.js","original":{"line":97,"column":17},"generated":{"line":1,"column":1400}},{"source":"G.js","name":"Rect","original":{"line":97,"column":21},"generated":{"line":1,"column":1404}},{"source":"G.js","name":"originData","original":{"line":97,"column":26},"generated":{"line":1,"column":1406}},{"source":"G.js","name":"Circle","original":{"line":98,"column":13},"generated":{"line":1,"column":1409}},{"source":"G.js","name":"Circle","original":{"line":98,"column":13},"generated":{"line":1,"column":1414}},{"source":"G.js","name":"name","original":{"line":98,"column":20},"generated":{"line":1,"column":1416}},{"source":"G.js","original":{"line":99,"column":17},"generated":{"line":1,"column":1421}},{"source":"G.js","original":{"line":99,"column":17},"generated":{"line":1,"column":1428}},{"source":"G.js","name":"Circle","original":{"line":99,"column":21},"generated":{"line":1,"column":1432}},{"source":"G.js","name":"originData","original":{"line":99,"column":28},"generated":{"line":1,"column":1434}},{"source":"G.js","name":"Polygon","original":{"line":100,"column":13},"generated":{"line":1,"column":1437}},{"source":"G.js","name":"Polygon","original":{"line":100,"column":13},"generated":{"line":1,"column":1442}},{"source":"G.js","name":"name","original":{"line":100,"column":21},"generated":{"line":1,"column":1444}},{"source":"G.js","original":{"line":101,"column":17},"generated":{"line":1,"column":1449}},{"source":"G.js","original":{"line":101,"column":17},"generated":{"line":1,"column":1456}},{"source":"G.js","name":"Polygon","original":{"line":101,"column":21},"generated":{"line":1,"column":1460}},{"source":"G.js","name":"originData","original":{"line":101,"column":29},"generated":{"line":1,"column":1462}},{"source":"G.js","name":"filter","original":{"line":103,"column":7},"generated":{"line":1,"column":1468}},{"source":"G.js","name":"_","original":{"line":103,"column":14},"generated":{"line":1,"column":1475}},{"source":"G.js","name":"_","original":{"line":103,"column":19},"generated":{"line":1,"column":1478}},{"source":"G.js","name":"initShowData","original":{"line":110,"column":14},"generated":{"line":1,"column":1481}},{"source":"G.js","name":"obj","original":{"line":110,"column":27},"generated":{"line":1,"column":1482}},{"source":"G.js","name":"showData","original":{"line":110,"column":31},"generated":{"line":1,"column":1484}},{"source":"G.js","name":"r","original":{"line":114,"column":6},"generated":{"line":1,"column":1501}},{"source":"G.js","name":"r","original":{"line":114,"column":6},"generated":{"line":1,"column":1505}},{"source":"G.js","name":"categoryMap","original":{"line":115,"column":8},"generated":{"line":1,"column":1510}},{"source":"G.js","name":"categoryMap","original":{"line":115,"column":8},"generated":{"line":1,"column":1516}},{"source":"G.js","original":{"line":116,"column":11},"generated":{"line":1,"column":1519}},{"source":"G.js","original":{"line":116,"column":11},"generated":{"line":1,"column":1525}},{"source":"G.js","original":{"line":117,"column":9},"generated":{"line":1,"column":1530}},{"source":"G.js","original":{"line":117,"column":9},"generated":{"line":1,"column":1534}},{"source":"G.js","original":{"line":118,"column":10},"generated":{"line":1,"column":1538}},{"source":"G.js","original":{"line":118,"column":10},"generated":{"line":1,"column":1543}},{"source":"G.js","original":{"line":119,"column":10},"generated":{"line":1,"column":1547}},{"source":"G.js","original":{"line":119,"column":10},"generated":{"line":1,"column":1552}},{"source":"G.js","name":"r","original":{"line":141,"column":9},"generated":{"line":1,"column":1557}},{"source":"G.js","name":"map","original":{"line":121,"column":15},"generated":{"line":1,"column":1564}},{"source":"G.js","name":"map","original":{"line":121,"column":15},"generated":{"line":1,"column":1566}},{"source":"G.js","name":"obj","original":{"line":121,"column":19},"generated":{"line":1,"column":1570}},{"source":"G.js","name":"category","original":{"line":122,"column":8},"generated":{"line":1,"column":1574}},{"source":"G.js","name":"category","original":{"line":122,"column":8},"generated":{"line":1,"column":1578}},{"source":"G.js","name":"obj","original":{"line":122,"column":19},"generated":{"line":1,"column":1580}},{"source":"G.js","name":"category","original":{"line":122,"column":23},"generated":{"line":1,"column":1582}},{"source":"G.js","name":"category","original":{"line":123,"column":9},"generated":{"line":1,"column":1591}},{"source":"G.js","original":{"line":124,"column":17},"generated":{"line":1,"column":1595}},{"source":"G.js","original":{"line":124,"column":17},"generated":{"line":1,"column":1597}},{"source":"G.js","name":"r","original":{"line":129,"column":9},"generated":{"line":1,"column":1606}},{"source":"G.js","name":"category","original":{"line":129,"column":11},"generated":{"line":1,"column":1608}},{"source":"G.js","name":"category","original":{"line":130,"column":8},"generated":{"line":1,"column":1613}},{"source":"G.js","name":"category","original":{"line":130,"column":8},"generated":{"line":1,"column":1615}},{"source":"G.js","original":{"line":130,"column":20},"generated":{"line":1,"column":1619}},{"source":"G.js","original":{"line":130,"column":20},"generated":{"line":1,"column":1628}},{"source":"G.js","name":"categoryMap","original":{"line":132,"column":14},"generated":{"line":1,"column":1630}},{"source":"G.js","name":"categoryMap","original":{"line":132,"column":14},"generated":{"line":1,"column":1635}},{"source":"G.js","name":"category","original":{"line":132,"column":26},"generated":{"line":1,"column":1637}},{"source":"G.js","original":{"line":132,"column":39},"generated":{"line":1,"column":1641}},{"source":"G.js","original":{"line":133,"column":22},"generated":{"line":1,"column":1649}},{"source":"G.js","name":"r","original":{"line":136,"column":15},"generated":{"line":1,"column":1667}},{"source":"G.js","name":"category","original":{"line":136,"column":17},"generated":{"line":1,"column":1669}},{"source":"G.js","name":"graphicsList","original":{"line":137,"column":9},"generated":{"line":1,"column":1672}},{"source":"G.js","name":"push","original":{"line":137,"column":22},"generated":{"line":1,"column":1685}},{"source":"G.js","name":"obj","original":{"line":137,"column":27},"generated":{"line":1,"column":1690}},{"source":"G.js","name":"Object","original":{"line":139,"column":6},"generated":{"line":1,"column":1695}},{"source":"G.js","name":"Object","original":{"line":139,"column":6},"generated":{"line":1,"column":1697}},{"source":"G.js","name":"values","original":{"line":139,"column":13},"generated":{"line":1,"column":1704}},{"source":"G.js","name":"r","original":{"line":139,"column":20},"generated":{"line":1,"column":1711}},{"source":"G.js","name":"Circle","original":{"line":62,"column":13},"generated":{"line":1,"column":1714}},{"source":"G.js","name":"Circle","original":{"line":62,"column":13},"generated":{"line":1,"column":1722}},{"source":"G.js","name":"Circle","original":{"line":62,"column":13},"generated":{"line":1,"column":1729}}],"sources":{"G.js":"export class G {\n  constructor (initial) {\n    this.type = initial.type || '';\n    this.attrs = initial.attrs || {};\n    this.genes = initial.genes || {};\n  }\n  getAttrs () {\n    const attrKeys = Object.keys(this.attrs);\n    return attrKeys.map(k => {\n      const gene = this.genes[k];\n\n      if (Array.isArray(this.attrs[k])) {\n        let geneArr = gene || [];\n        return {\n          [k]: this.attrs[k].map((v, i) => {\n            return geneArr[i] ? (geneArr[i].express || 0) : v;\n          }),\n        };\n      }\n      return {\n        [k]: gene ? gene.express ? gene.express : 0 : this.attrs[k],\n      }\n    }).reduce((p, c) => Object.assign(p, c), {});\n  }\n  output () {\n    return {\n      type: this.type,\n      ...this.getAttrs(),\n    }\n  }\n}\n\nexport class Polygon extends G {\n  constructor (initial = {}) {\n    super(initial);\n    this.type = Polygon.name;\n    if (!initial.attrs) {\n      this.attrs = {\n        pointers: [20, 20, 100, 20, 100, 100, 20, 20],\n        fill: '#000000',\n      }\n    }\n  }\n}\n\nexport class Rect extends G {\n  constructor (initial = {}) {\n    super(initial);\n    this.type = Rect.name;\n    if (!initial.attrs) {\n      this.attrs = {\n        x: 20,\n        y: 20,\n        w: 80,\n        h: 50,\n        fill: '#000000',\n      };\n    }\n  }\n}\n\nexport class Circle extends G {\n  constructor (initial = {}) {\n    super(initial);\n    this.type = Circle.name;\n    if (!initial.attrs) {\n      this.attrs = {\n        x: 100,\n        y: 100,\n        r: 30,\n        fill: '#000000',\n      };\n    }\n  }\n}\n\nexport function normalizeGraphics (graphicsData, genes) {\n\n  function initShowData (d) {\n    return d.map(originData => {\n      originData = {\n        ...originData,\n        genes: Object.keys(originData.genes).map(prop => {\n          const geneName = originData.genes[prop]\n\n          if (!geneName) {\n            return {};\n          }\n          return {\n            [prop]: genes.filter(gen => gen.name === prop)[0],\n          }\n        }).reduce((p, c) => Object.assign(p, c), {}),\n      }\n\n      switch (originData.type) {\n        case Rect.name:\n          return new Rect(originData);\n        case Circle.name:\n          return new Circle(originData);\n        case Polygon.name:\n          return new Polygon(originData);\n      }\n    }).filter(_ => _);\n  }\n\n  const graphicsList = [].concat(graphicsData).map(obj => ({\n    ...obj,\n    id: obj._id,\n    nameText: decodeURIComponent(obj.name),\n    showData: initShowData(obj.showData || []),\n  }));\n\n\n  var r = {};\n  const categoryMap = {\n    other: '其它',\n    eye: '眼',\n    head: '头',\n    horn: '角',\n  };\n  graphicsList.map(obj => {\n    var category = obj.category;\n    if (!category) {\n      category = 'other';\n    }\n    if (!categoryMap[category]) {\n      // throw new Error(`${category} not found map`);\n    }\n    if (!r[category]) {\n      r[category] = {\n        category,\n        name: categoryMap[category] || 'other',\n        graphicsList: [],\n      }\n    }\n    var list = r[category];\n    list.graphicsList.push(obj);\n  });\n  r = Object.values(r);\n\n  return r;\n}\n//\n// module.exports = {\n//   normalizeGraphics,\n//   G,\n//   Polygon,\n//   Rect,\n//   Circle,\n// };\n"},"lineCount":null}},"hash":"5f520d9b95c5a2694b34431fa90c7ae2","cacheData":{"env":{}},"id":1}